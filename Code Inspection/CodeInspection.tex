\documentclass[18pt,oneside,a4paper, titlepage]{article}

\usepackage[hidelinks]{hyperref}
\usepackage[pdftex]{graphicx}

\begin{document}
\begin{figure}[t]
	\centering
	\includegraphics[scale=0.35]{logo-polimi.png}
\end{figure}
\title{\textbf{myTaxiService}\\Code Inspection\\ A.Y. 2015/2016\\
	Politecnico di Milano\\ Version 1.0}	
\author{Cattaneo Michela Gaia, matr. 791685\\Barlocco Mattia, matr. 792735 }
\date{January 5th, 2015}
\maketitle

\newpage
\tableofcontents

\newpage
\section{Introduction}
	\subsection{Purpose}
		This document represents the Code Inspection document, whose main goal is to examine source code in order to discover bugs, verifying that coding conventions are respected and look for potential issues. This part is necessary to improve the quality of the code and to assure that there are no errors in it. \\
		This document is addressed to the project development teams, who need to work on code without mistakes before the production phase, in order to avoid future possible problems.
	\subsection{Document structure}
		This document is divided in five main parts:
		\begin{itemize}
			\item \textbf{Introduction:} this section describes the document in general and its purpose.
			\item  \textbf{Classes assigned:} this section specifies the name of the classes and methods assigned to the group.
			\item  \textbf{Functional roles:} this section shows the role of each method assigned and their functions in the class.
			\item  \textbf{Issues:} this section verifies that all the points of the code inspection checklist are respected in the classes assigned.
			\item  \textbf{Other problems:} this section deals with other possible issues found in the code, referring to the lines generating a bug and how it can create problems in the program.
		\end{itemize}

\newpage	
\section{Classes Assigned}
	\begin{itemize}
		\item  \textbf{Package:} com.sun.jdo.spi.persistence.support.sqlstore
		\item  \textbf{Class:} SQLStateManager
		\item  \textbf{Methods:}
			\begin{itemize}
				\item[-] addCollectionRelationship
				\item[-] setForeignKey
				\item[-] addJoinTableEntry
				\item[-] prepareUpdateFieldSpecial
				
			\end{itemize}
	\end{itemize}
		
\newpage
\section{Functional Roles}
	\subsection{addCollectionRelationship}
		This method sets the relationship for the objects added to a collection relationship. Given a list of object to add to the relationship and a list of newly registered state managers, this method transforms and adds all the elements of the addedList to the newlyRegisteredSMs list, by checking that the elements are not null and making them autopersistent. Then it checks that the element added has not been deleted and updates the relationship in the data store.
		It is used when it is necessary to apply the updates in the data store, in particular it processes the updates in the collections by adding the relationships between them.
		
		Evidence: javadoc, function calls.
	\subsection{setForeignKey}
		This method is used to set the foreign key corresponding to the relationship field. The fieldDesc and inverseFieldDesc parameters are used for the iteration on the local or foreign fields. This method calls setForeignKey, a method with other parameters that actually sets the local field corresponding to a foreign key column to the new value for the relationship update.
		This method is called in the processForeignKey in order to set the foreign key on the added object. It is useful when an update of relationships in the data store is needed.
		
		Evidence: javadoc, function calls.
	\subsection{addJoinTableEntry}
	
	\subsection{prepareUpdateFieldSpecial}
	

\newpage
\section{Issues}
	\begin{itemize}
		\item Class:
			\begin{itemize}
				\item[-] line 75: There is no JavaDoc for the class.
				\item[-] line 151: /** I18N message handler. */\\
				private final static ResourceBundle messages = I18NHelper.loadBundle(
				SQLStateManager.class);\\
				Here the ResourceBundle is declared as a constant and it is not capitalized, as it is said in the naming conventions at point 7 of the checklist.
				\item[-] line 219: private void registerInstance(boolean throwDuplicateException,
				ArrayList newlyRegisteredSMs, LifeCycleState oldstate);\\
				There is no JavaDoc for this method.
				\item[-] line 270: private void unsetMaskBit(int index, int mask);\\
				There is no JavaDoc for this method.
				\item[-] line 283: private void clearMask(int mask);\\
				There is no JavaDoc for this method.
				\item[-] line 308: private void newFieldMasks();\\
				There is no JavaDoc for this method.
				\item[-] line 400: public synchronized void replaceObjectField(String fieldName, Object o);\\
				There is no JavaDoc for this method.
				\item[-] line 408: public synchronized void makeDirty(String fieldName);
				\\There is no JavaDoc for this method.
				\item[-] line 508: public void makePresent(String fieldName, Object value);
				\\There is no JavaDoc for this method.
				\item[-] line 560: private void makeAutoPersistent(Object pc);
				\\There is no JavaDoc for this method.
				\item[-] line 1108: private boolean compareUpdatedFields(SQLStateManager next);
				\\There is no JavaDoc for this method.
				\item[-] line 1542: private void reset(boolean retainValues, boolean wasNew, boolean keepState);
				\\There is no JavaDoc for this method.
				\item[-] line 1706: private void markKeyFieldsPresent();
				\\There is no JavaDoc for this method.
				\item[-] line 2154: private SQLStateManager copyPersistent();
				\\There is no JavaDoc for this method.
				\item[-] line 2240: private Object cloneObjectMaybe(Object source);
				\\There is no JavaDoc for this method.
				\item[-] line 4087: private void assertNotPK(int fieldNumber);
				\\There is no JavaDoc for this method.
				\item[-] line 4093: private void assertPKUpdate(FieldDesc f, Object value);
				\\There is no JavaDoc for this method.
				\item[-] line 77-162: these lines does not respect the point 25.D and 25.E of the checklist, the public static or instance variables are not declared before the private ones.
				
				
			\end{itemize}
		\item addCollectionRelationship:
			\begin{itemize}
				\item[-] line 3384:  SQLStateManager addedSM = getAddedSM(addedObject, newlyRegisteredSMs);\\
				This line exceeds the 80 characters suggested at point 13 of the checklist and it is possible to reduce the number of characters in this line, by wrapping after the comma in the \textit{getAddedSM} call, as said at point 15 of the checklist.
				\item[-] line 3409: updateRelationshipInDataStore(fieldDesc, addedSM, null, inverseFieldDesc, false);\\
				This line exceeds the 80 characters suggested at point 13 of the checklist and it is possible to reduce the number of characters in this line, by wrapping after the commas that separates the parameters of the method, as said at point 15 of the checklist.
			\end{itemize}
		\item setForeignKey:
			\begin{itemize}
				\item[-] line 3451-3452: LocalFieldDesc la = (LocalFieldDesc) fieldDesc.localFields.get(i);\\
				LocalFieldDesc fa = (LocalFieldDesc) fieldDesc.foreignFields.get(i);\\
				This lines exceed the 80 characters suggested at point 13 of the checklist and it is possible to reduce the number of characters in this lines, by wrapping after the equal operator after \textit{la} and \textit{fa}, as said at point 15 of the checklist.
				\item[-] line 3458-3459: LocalFieldDesc la = (LocalFieldDesc) inverseFieldDesc.foreignFields.get(i);\\
				LocalFieldDesc fa = (LocalFieldDesc) inverseFieldDesc.localFields.get(i);\\
				This lines exceed the 80 characters suggested at point 13 of the checklist and it is possible to reduce the number of characters in this lines, by wrapping after the equal operator after \textit{la} and \textit{fa}, as said at point 15 of the checklist.
			\end{itemize}
		\item addJoinTableEntry:
		\begin{itemize}
			\item[-] line 
			\item[-] line 
		\end{itemize}
		\item prepareUpdateFieldSpecial:
		\begin{itemize}
			\item[-] line 
			\item[-] line 
		\end{itemize}
		
	\end{itemize}

\newpage
\section{Other Problems}


\end{document}